<?php

declare(strict_types=1);

/**
 * Phase 1.3: ãƒ«ãƒ¼ãƒ—å‡¦ç†ï¼ˆfor/foreach/whileï¼‰
 *
 * ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã€PHPã®ãƒ«ãƒ¼ãƒ—å‡¦ç†ã«ã¤ã„ã¦å­¦ç¿’ã—ã¾ã™ï¼š
 * - for ãƒ«ãƒ¼ãƒ—
 * - foreach ãƒ«ãƒ¼ãƒ—
 * - while ãƒ«ãƒ¼ãƒ—
 * - do-while ãƒ«ãƒ¼ãƒ—
 * - break ã¨ continue
 */

echo "=== Phase 1.3: ãƒ«ãƒ¼ãƒ—å‡¦ç† ===" . PHP_EOL . PHP_EOL;

// ============================================================
// 1. for ãƒ«ãƒ¼ãƒ—ã®åŸºæœ¬
// ============================================================

echo "ã€1. for ãƒ«ãƒ¼ãƒ—ã®åŸºæœ¬ã€‘" . PHP_EOL;

echo "1ã‹ã‚‰10ã¾ã§ã®æ•°å­—:" . PHP_EOL;
for ($i = 1; $i <= 10; $i++) {
    echo $i . " ";
}
echo PHP_EOL . PHP_EOL;

echo "10ã‹ã‚‰1ã¾ã§ã®æ•°å­—ï¼ˆã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ï¼‰:" . PHP_EOL;
for ($i = 10; $i >= 1; $i--) {
    echo $i . " ";
}
echo PHP_EOL . PHP_EOL;

echo "2ã®å€æ•°ï¼ˆ2, 4, 6, 8, 10ï¼‰:" . PHP_EOL;
for ($i = 2; $i <= 10; $i += 2) {
    echo $i . " ";
}
echo PHP_EOL . PHP_EOL;

// ============================================================
// 2. foreach ãƒ«ãƒ¼ãƒ—ï¼ˆé…åˆ—ã®åå¾©å‡¦ç†ï¼‰
// ============================================================

echo "ã€2. foreach ãƒ«ãƒ¼ãƒ—ã€‘" . PHP_EOL;

// ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹é…åˆ—
$fruits = ['ã‚Šã‚“ã”', 'ãƒãƒŠãƒŠ', 'ã‚ªãƒ¬ãƒ³ã‚¸', 'ã¶ã©ã†', 'ã„ã¡ã”'];

echo "æœç‰©ãƒªã‚¹ãƒˆ:" . PHP_EOL;
foreach ($fruits as $fruit) {
    echo "- {$fruit}" . PHP_EOL;
}
echo PHP_EOL;

// ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä»˜ãã§ã®åå¾©
echo "æœç‰©ãƒªã‚¹ãƒˆï¼ˆç•ªå·ä»˜ãï¼‰:" . PHP_EOL;
foreach ($fruits as $index => $fruit) {
    $number = $index + 1;  // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯0ã‹ã‚‰å§‹ã¾ã‚‹ã®ã§+1
    echo "{$number}. {$fruit}" . PHP_EOL;
}
echo PHP_EOL;

// é€£æƒ³é…åˆ—
$user = [
    'name' => 'å±±ç”°å¤ªéƒ',
    'age' => 25,
    'email' => 'yamada@example.com',
    'city' => 'æ±äº¬',
];

echo "ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±:" . PHP_EOL;
foreach ($user as $key => $value) {
    echo "{$key}: {$value}" . PHP_EOL;
}
echo PHP_EOL;

// ============================================================
// 3. while ãƒ«ãƒ¼ãƒ—
// ============================================================

echo "ã€3. while ãƒ«ãƒ¼ãƒ—ã€‘" . PHP_EOL;

$count = 1;
echo "while ãƒ«ãƒ¼ãƒ—ï¼ˆ1ã‹ã‚‰5ã¾ã§ï¼‰:" . PHP_EOL;
while ($count <= 5) {
    echo $count . " ";
    $count++;
}
echo PHP_EOL . PHP_EOL;

// ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
$lines = ['1è¡Œç›®', '2è¡Œç›®', '3è¡Œç›®', '4è¡Œç›®', '5è¡Œç›®'];
$lineNumber = 0;

echo "ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³:" . PHP_EOL;
while ($lineNumber < count($lines)) {
    echo "è¡Œ{$lineNumber}: {$lines[$lineNumber]}" . PHP_EOL;
    $lineNumber++;
}
echo PHP_EOL;

// ============================================================
// 4. do-while ãƒ«ãƒ¼ãƒ—
// ============================================================

echo "ã€4. do-while ãƒ«ãƒ¼ãƒ—ã€‘" . PHP_EOL;

$number = 1;
echo "do-while ãƒ«ãƒ¼ãƒ—ï¼ˆæœ€ä½1å›ã¯å®Ÿè¡Œã•ã‚Œã‚‹ï¼‰:" . PHP_EOL;
do {
    echo $number . " ";
    $number++;
} while ($number <= 5);
echo PHP_EOL . PHP_EOL;

// while ã¨ã®é•ã„ï¼ˆæ¡ä»¶ãŒæœ€åˆã‹ã‚‰å½ã®å ´åˆï¼‰
echo "while ãƒ«ãƒ¼ãƒ—ï¼ˆæ¡ä»¶ãŒå½ã®å ´åˆï¼‰:" . PHP_EOL;
$x = 10;
while ($x < 5) {
    echo "å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“" . PHP_EOL;
}
echo "whileã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ" . PHP_EOL . PHP_EOL;

echo "do-while ãƒ«ãƒ¼ãƒ—ï¼ˆæ¡ä»¶ãŒå½ã®å ´åˆï¼‰:" . PHP_EOL;
$y = 10;
do {
    echo "1å›ã ã‘å®Ÿè¡Œã•ã‚Œã¾ã™" . PHP_EOL;
} while ($y < 5);
echo PHP_EOL;

// ============================================================
// 5. breakï¼ˆãƒ«ãƒ¼ãƒ—ã®ä¸­æ–­ï¼‰
// ============================================================

echo "ã€5. breakï¼ˆãƒ«ãƒ¼ãƒ—ã®ä¸­æ–­ï¼‰ã€‘" . PHP_EOL;

echo "1ã‹ã‚‰10ã¾ã§å‡ºåŠ›ã™ã‚‹ãŒã€5ã§åœæ­¢:" . PHP_EOL;
for ($i = 1; $i <= 10; $i++) {
    if ($i === 5) {
        echo "â†’ 5ã«åˆ°é”ã—ãŸã®ã§ãƒ«ãƒ¼ãƒ—ã‚’ä¸­æ–­" . PHP_EOL;
        break;
    }
    echo $i . " ";
}
echo PHP_EOL . PHP_EOL;

// é…åˆ—ã‹ã‚‰ç‰¹å®šã®è¦ç´ ã‚’æ¤œç´¢
$numbers = [10, 20, 30, 40, 50, 60, 70];
$target = 40;
$foundIndex = -1;

echo "é…åˆ—ã‹ã‚‰{$target}ã‚’æ¤œç´¢:" . PHP_EOL;
foreach ($numbers as $index => $number) {
    echo "  ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹{$index}ã‚’ãƒã‚§ãƒƒã‚¯ä¸­... ";
    if ($number === $target) {
        echo "è¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼" . PHP_EOL;
        $foundIndex = $index;
        break;
    }
    echo "è©²å½“ãªã—" . PHP_EOL;
}

if ($foundIndex !== -1) {
    echo "çµæœ: {$target}ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹{$foundIndex}ã«ã‚ã‚Šã¾ã™" . PHP_EOL;
}
echo PHP_EOL;

// ============================================================
// 6. continueï¼ˆæ¬¡ã®åå¾©ã¸ã‚¹ã‚­ãƒƒãƒ—ï¼‰
// ============================================================

echo "ã€6. continueï¼ˆæ¬¡ã®åå¾©ã¸ã‚¹ã‚­ãƒƒãƒ—ï¼‰ã€‘" . PHP_EOL;

echo "1ã‹ã‚‰10ã¾ã§å‡ºåŠ›ã™ã‚‹ãŒã€5ã¯ã‚¹ã‚­ãƒƒãƒ—:" . PHP_EOL;
for ($i = 1; $i <= 10; $i++) {
    if ($i === 5) {
        continue;  // 5ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦æ¬¡ã®åå¾©ã¸
    }
    echo $i . " ";
}
echo PHP_EOL . PHP_EOL;

// å¶æ•°ã®ã¿å‡ºåŠ›
echo "1ã‹ã‚‰20ã¾ã§ã®å¶æ•°ã®ã¿å‡ºåŠ›:" . PHP_EOL;
for ($i = 1; $i <= 20; $i++) {
    if ($i % 2 !== 0) {
        continue;  // å¥‡æ•°ã¯ã‚¹ã‚­ãƒƒãƒ—
    }
    echo $i . " ";
}
echo PHP_EOL . PHP_EOL;

// ============================================================
// 7. ãƒã‚¹ãƒˆã—ãŸãƒ«ãƒ¼ãƒ—
// ============================================================

echo "ã€7. ãƒã‚¹ãƒˆã—ãŸãƒ«ãƒ¼ãƒ—ã€‘" . PHP_EOL;

echo "ä¹ä¹è¡¨ï¼ˆ3x3ã¾ã§ï¼‰:" . PHP_EOL;
for ($i = 1; $i <= 3; $i++) {
    for ($j = 1; $j <= 3; $j++) {
        $result = $i * $j;
        echo "{$i} x {$j} = {$result}  ";
    }
    echo PHP_EOL;
}
echo PHP_EOL;

// 2æ¬¡å…ƒé…åˆ—ã®åå¾©å‡¦ç†
$students = [
    ['name' => 'å±±ç”°å¤ªéƒ', 'score' => 85],
    ['name' => 'ä½è—¤èŠ±å­', 'score' => 92],
    ['name' => 'éˆ´æœ¨ä¸€éƒ', 'score' => 78],
];

echo "å­¦ç”Ÿã®æˆç¸¾ä¸€è¦§:" . PHP_EOL;
foreach ($students as $index => $student) {
    $number = $index + 1;
    echo "{$number}. {$student['name']}: {$student['score']}ç‚¹" . PHP_EOL;
}
echo PHP_EOL;

// ============================================================
// 8. ãƒ©ãƒ™ãƒ«ä»˜ãbreak/continueï¼ˆãƒã‚¹ãƒˆã—ãŸãƒ«ãƒ¼ãƒ—ï¼‰
// ============================================================

echo "ã€8. ãƒ©ãƒ™ãƒ«ä»˜ãbreakï¼ˆãƒã‚¹ãƒˆã—ãŸãƒ«ãƒ¼ãƒ—ï¼‰ã€‘" . PHP_EOL;

echo "å¤–å´ã®ãƒ«ãƒ¼ãƒ—ã‚‚ä¸­æ–­ã™ã‚‹ä¾‹:" . PHP_EOL;
for ($i = 1; $i <= 5; $i++) {
    echo "å¤–å´ãƒ«ãƒ¼ãƒ—: i = {$i}" . PHP_EOL;
    for ($j = 1; $j <= 5; $j++) {
        echo "  å†…å´ãƒ«ãƒ¼ãƒ—: j = {$j}" . PHP_EOL;
        if ($i === 2 && $j === 3) {
            echo "  â†’ i=2, j=3ã§å¤–å´ãƒ«ãƒ¼ãƒ—ã‚‚ä¸­æ–­" . PHP_EOL;
            break 2;  // å¤–å´ã®ãƒ«ãƒ¼ãƒ—ã‚‚ä¸­æ–­
        }
    }
}
echo PHP_EOL;

// ============================================================
// 9. å®Ÿç”¨ä¾‹ï¼šåˆè¨ˆå€¤ã®è¨ˆç®—
// ============================================================

echo "ã€9. å®Ÿç”¨ä¾‹ï¼šåˆè¨ˆå€¤ã®è¨ˆç®—ã€‘" . PHP_EOL;

$prices = [1200, 3500, 850, 4200, 1800];
$total = 0;

foreach ($prices as $price) {
    $total += $price;
}

echo "å•†å“ä¾¡æ ¼: " . implode(', ', array_map(fn($p) => "Â¥{$p}", $prices)) . PHP_EOL;
echo "åˆè¨ˆ: Â¥" . number_format($total) . PHP_EOL;

echo PHP_EOL;

// ============================================================
// 10. å®Ÿç”¨ä¾‹ï¼šãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
// ============================================================

echo "ã€10. å®Ÿç”¨ä¾‹ï¼šãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€‘" . PHP_EOL;

$products = [
    ['name' => 'ãƒãƒ¼ãƒˆPC', 'price' => 98000, 'in_stock' => true],
    ['name' => 'ãƒã‚¦ã‚¹', 'price' => 1500, 'in_stock' => true],
    ['name' => 'ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰', 'price' => 8000, 'in_stock' => false],
    ['name' => 'ãƒ¢ãƒ‹ã‚¿ãƒ¼', 'price' => 35000, 'in_stock' => true],
    ['name' => 'ãƒ˜ãƒƒãƒ‰ãƒ•ã‚©ãƒ³', 'price' => 12000, 'in_stock' => false],
];

echo "åœ¨åº«ã‚ã‚Šå•†å“ï¼ˆÂ¥10,000ä»¥ä¸Šï¼‰:" . PHP_EOL;
foreach ($products as $product) {
    // åœ¨åº«ãªã—ã¯ã‚¹ã‚­ãƒƒãƒ—
    if (!$product['in_stock']) {
        continue;
    }

    // 10,000å††æœªæº€ã¯ã‚¹ã‚­ãƒƒãƒ—
    if ($product['price'] < 10000) {
        continue;
    }

    echo "- {$product['name']}: Â¥" . number_format($product['price']) . PHP_EOL;
}

echo PHP_EOL;

// ============================================================
// 11. å®Ÿç”¨ä¾‹ï¼šãƒ‘ã‚¿ãƒ¼ãƒ³ç”Ÿæˆ
// ============================================================

echo "ã€11. å®Ÿç”¨ä¾‹ï¼šãƒ‘ã‚¿ãƒ¼ãƒ³ç”Ÿæˆã€‘" . PHP_EOL;

echo "ä¸‰è§’å½¢ãƒ‘ã‚¿ãƒ¼ãƒ³:" . PHP_EOL;
for ($i = 1; $i <= 5; $i++) {
    for ($j = 1; $j <= $i; $j++) {
        echo "* ";
    }
    echo PHP_EOL;
}

echo PHP_EOL;

echo "é€†ä¸‰è§’å½¢ãƒ‘ã‚¿ãƒ¼ãƒ³:" . PHP_EOL;
for ($i = 5; $i >= 1; $i--) {
    for ($j = 1; $j <= $i; $j++) {
        echo "* ";
    }
    echo PHP_EOL;
}

echo PHP_EOL;

// ============================================================
// 12. å®Ÿç”¨ä¾‹ï¼šãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›
// ============================================================

echo "ã€12. å®Ÿç”¨ä¾‹ï¼šãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›ã€‘" . PHP_EOL;

$temperatures = [15, 20, 25, 30, 35];  // æ‘‚æ°æ¸©åº¦

echo "æ‘‚æ°ã‹ã‚‰è¯æ°ã¸ã®å¤‰æ›:" . PHP_EOL;
foreach ($temperatures as $celsius) {
    $fahrenheit = ($celsius * 9 / 5) + 32;
    echo "{$celsius}Â°C = {$fahrenheit}Â°F" . PHP_EOL;
}

echo PHP_EOL;

// ============================================================
// 13. å®Ÿç”¨ä¾‹ï¼šã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒãƒ¼
// ============================================================

echo "ã€13. å®Ÿç”¨ä¾‹ï¼šã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã€‘" . PHP_EOL;

echo "ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³é–‹å§‹: ";
for ($i = 5; $i >= 1; $i--) {
    echo $i . "... ";
}
echo "ğŸš€ ç™ºå°„ï¼" . PHP_EOL;

echo PHP_EOL;

// ============================================================
// 14. ç„¡é™ãƒ«ãƒ¼ãƒ—ã¨è„±å‡ºæ¡ä»¶
// ============================================================

echo "ã€14. ç„¡é™ãƒ«ãƒ¼ãƒ—ã¨è„±å‡ºæ¡ä»¶ã€‘" . PHP_EOL;

echo "1ã‹ã‚‰åˆè¨ˆãŒ100ã‚’è¶…ãˆã‚‹ã¾ã§åŠ ç®—:" . PHP_EOL;
$sum = 0;
$counter = 1;

while (true) {  // ç„¡é™ãƒ«ãƒ¼ãƒ—
    $sum += $counter;
    echo "{$counter}ã‚’åŠ ç®— â†’ åˆè¨ˆ: {$sum}" . PHP_EOL;

    if ($sum > 100) {
        echo "åˆè¨ˆãŒ100ã‚’è¶…ãˆãŸã®ã§çµ‚äº†" . PHP_EOL;
        break;  // ãƒ«ãƒ¼ãƒ—ã‚’æŠœã‘ã‚‹
    }

    $counter++;
}

echo PHP_EOL;

// ============================================================
// 15. arrayé–¢æ•°ã‚’ä½¿ã‚ãªã„é…åˆ—æ“ä½œ
// ============================================================

echo "ã€15. ãƒ«ãƒ¼ãƒ—ã‚’ä½¿ã£ãŸé…åˆ—æ“ä½œã€‘" . PHP_EOL;

$numbers = [3, 7, 2, 9, 5, 1, 8];

// æœ€å¤§å€¤ã‚’è¦‹ã¤ã‘ã‚‹
$max = $numbers[0];
foreach ($numbers as $number) {
    if ($number > $max) {
        $max = $number;
    }
}
echo "é…åˆ—ã®æœ€å¤§å€¤: {$max}" . PHP_EOL;

// æœ€å°å€¤ã‚’è¦‹ã¤ã‘ã‚‹
$min = $numbers[0];
foreach ($numbers as $number) {
    if ($number < $min) {
        $min = $number;
    }
}
echo "é…åˆ—ã®æœ€å°å€¤: {$min}" . PHP_EOL;

// å¹³å‡å€¤ã‚’è¨ˆç®—
$sum = 0;
$count = 0;
foreach ($numbers as $number) {
    $sum += $number;
    $count++;
}
$average = $sum / $count;
echo "é…åˆ—ã®å¹³å‡å€¤: " . round($average, 2) . PHP_EOL;

echo PHP_EOL;

// ============================================================
// å­¦ç¿’ã®ãƒã‚¤ãƒ³ãƒˆ
// ============================================================

echo "ã€å­¦ç¿’ã®ãƒã‚¤ãƒ³ãƒˆã€‘" . PHP_EOL;
echo "1. for: ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãŒå¿…è¦ãªå ´åˆã«ä½¿ç”¨" . PHP_EOL;
echo "2. foreach: é…åˆ—ã®å…¨è¦ç´ ã‚’å‡¦ç†ã™ã‚‹å ´åˆã«ä½¿ç”¨ï¼ˆæœ€ã‚‚ä¸€èˆ¬çš„ï¼‰" . PHP_EOL;
echo "3. while: æ¡ä»¶ãŒçœŸã®é–“ç¹°ã‚Šè¿”ã™ï¼ˆå›æ•°ãŒä¸æ˜ãªå ´åˆï¼‰" . PHP_EOL;
echo "4. do-while: æœ€ä½1å›ã¯å®Ÿè¡Œã—ãŸã„å ´åˆ" . PHP_EOL;
echo "5. break: ãƒ«ãƒ¼ãƒ—ã‚’é€”ä¸­ã§çµ‚äº†" . PHP_EOL;
echo "6. continue: ç¾åœ¨ã®åå¾©ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦æ¬¡ã¸" . PHP_EOL;
echo "7. ç„¡é™ãƒ«ãƒ¼ãƒ—ã«ã¯å¿…ãšè„±å‡ºæ¡ä»¶ã‚’è¨­å®š" . PHP_EOL;

echo PHP_EOL;
echo "=== Phase 1.3: ãƒ«ãƒ¼ãƒ—å‡¦ç† å®Œäº† ===" . PHP_EOL;
